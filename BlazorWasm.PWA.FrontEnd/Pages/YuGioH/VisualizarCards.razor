@page "/visualizarCards"
@layout BlankLayout
@inject IRepository<YuGioH> yugiRepo
<h3>VisualizarPokemon</h3>
@if (cardAtual != null)
{
    <p>Id: @cardAtual.Id</p>
    <br>
    <p>Nome: @cardAtual.Nome</p>
    <br>
    <img src="@cardAtual.ImgUrl" style="width:200px" />
    <br>
    <p>Tipo: @cardAtual.Tipo</p>
    <br>
    <p>Golpe Principal: @cardAtual.DEF</p>
    <br>
    <p>Forca: @cardAtual.ATK </p>
    <br>
    <br>

    @if (idAtual > 1)
    {
        <button @onclick=IrParaAnterior> Anterior</button>
    }

    @if (idAtual < idMax)
    {
        <button @onclick=IrParaProximo> Proximo </button>
    }

}
else
{
    <h2>Carregando</h2>
}




@code {
    YuGioH? cardAtual = null;
    private int idAtual = 1;
    private int idMax;

    protected async override Task OnInitializedAsync()
    {
        cardAtual = await yugiRepo.Get(idAtual);
        idMax = (await yugiRepo.Get()).Count;
    }

    public async void IrParaAnterior()
    {
        idAtual--;
        Console.WriteLine("Requisitando Pokemon: " + idAtual);
        cardAtual = null;
        cardAtual = await yugiRepo.Get(idAtual);
        Console.WriteLine("Pokemon Encontrado ");
        StateHasChanged();

    }

    public async void IrParaProximo()
    {
        idAtual++;
        Console.WriteLine("Requisitando Pokemon: " + idAtual);
        cardAtual = null;
        cardAtual = await yugiRepo.Get(idAtual);
        Console.WriteLine("Pokemon Encontrado ");
        StateHasChanged();

    }


}
